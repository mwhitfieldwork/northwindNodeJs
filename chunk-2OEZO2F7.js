import{a as Ft}from"./chunk-ENMPSJXG.js";import{b as R}from"./chunk-5ZLIDYDP.js";import{a as vt}from"./chunk-OBPBYJ6A.js";import{j as L,k as A}from"./chunk-HCD2ASE5.js";import"./chunk-NPBKDSKV.js";import{a as w,d as B,e as T}from"./chunk-7GNCTW5R.js";import{P as O}from"./chunk-Y7UIZA4W.js";import"./chunk-EJJBCPAK.js";import{b as Ct}from"./chunk-ZO4JBRXK.js";import{b as ht,f as E,g as v,h as I,l as yt,m as St,n as h,o as D,p as bt,q as G,u as kt,v as _t,w as Pt,y}from"./chunk-Y2YOYVZC.js";import{$b as dt,Aa as S,Ac as gt,Ba as it,Bb as C,C as K,Db as ut,Ma as s,Na as st,Ob as a,Pb as x,Qb as F,V as W,Wb as u,Y as rt,Zb as lt,a as z,b as J,ca as k,db as at,ga as p,hb as N,ib as c,lb as ct,lc as ft,nb as mt,ob as P,p as ot,pb as pt,qb as d,ra as nt,rb as f,s as Q,sb as i,tb as r,ub as g,xa as _}from"./chunk-SPCE6MV4.js";function Et(n,e){if(n&1&&(i(0,"mat-option",4),a(1),r()),n&2){let t=e.$implicit;c("value",t),s(),F(" ",t.contactName," ")}}var V=class n{parent=S(new I({}));topCustomers=[];selectedCustomer=new _;ngOnInit(){this.parent().get("store").get("customer")?.valueChanges.subscribe(t=>{console.log("Selected customer:",t.custId),this.selectedCustomer.emit(t.custId)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["stock-branch"]],inputs:{parent:[1,"parent"],topCustomers:"topCustomers"},outputs:{selectedCustomer:"selectedCustomer"},standalone:!0,features:[u],decls:10,vars:1,consts:[[3,"formGroup"],["formGroupName","store",1,"branch-detail-fields"],["appearance","fill",1,"custom-field"],["formControlName","customer"],[3,"value"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),a(4,"Select Customer"),r(),i(5,"mat-select",3)(6,"mat-option",4),a(7,"Select Category"),r(),d(8,Et,2,2,"mat-option",4,P),r()()()()),t&2&&(c("formGroup",o.parent()),s(8),f(o.topCustomers))},dependencies:[y,E,v,h,G,D,R,B,w,T,A,L,O],styles:["[_nghost-%COMP%]{margin:25px 0;display:block}.branch-detail-fields[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding-bottom:20px}"]})};function Gt(n,e){if(n&1&&(i(0,"mat-option",4),a(1),r()),n&2){let t=e.$implicit;c("value",t),s(),F(" ",t.productName," ")}}var q=class n{parent=S(new I({}));customerProducts=S([]);added=new _;ngOnInit(){this.parent().get("selector").get("customerID")?.valueChanges.subscribe(t=>{console.log("Selected customer ID:",t),this.parent().get("selector")?.patchValue({cusomterId:t.customerID,categoryName:t.categoryName,productName:t.productName,orderDate:t.orderDate,productID:t.productID,unitPrice:t.unitPrice,quantity:t.quantity,rating:t.rating})})}onAdd(){console.log(this.parent().get("selector")?.value,"Selector"),this.added.emit(this.parent().get("selector")?.value),this.parent().get("selector")?.reset({customerID:0,categoryName:"",productName:"",orderDate:"",productID:0,unitPrice:0,quantity:10,rating:0}),this.parent().get("selector")?.setValue({customerID:0,categoryName:"",productName:"",orderDate:"",productID:0,unitPrice:0,quantity:12,rating:0}),this.parent().get("selector")?.patchValue({customerID:0,categoryName:"",productName:"",orderDate:"",productID:0,unitPrice:0,quantity:9,rating:0})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["stock-selector"]],inputs:{parent:[1,"parent"],customerProducts:[1,"customerProducts"]},outputs:{added:"added"},standalone:!0,features:[u],decls:13,vars:1,consts:[[1,"stock-selector",3,"formGroup"],["formGroupName","selector"],["appearance","fill",1,"custom-field"],["formControlName","customerID"],[3,"value"],["type","number","step","10","min","10","max","40","formControlName","quantity",1,"stock-stepper"],["type","button",1,"btn","add-stock-btn",3,"click"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),a(4,"Select Product"),r(),i(5,"mat-select",3)(6,"mat-option",4),a(7,"Select Product"),r(),d(8,Gt,2,2,"mat-option",4,P),r()(),g(10,"input",5),i(11,"button",6),C("click",function(){return o.onAdd()}),a(12,"Add stock"),r()()()),t&2&&(c("formGroup",o.parent()),s(8),f(o.customerProducts()))},dependencies:[y,ht,St,E,v,_t,kt,h,G,D,R,B,w,T,A,L,O],styles:[".stock-selector[_ngcontent-%COMP%]{margin-bottom:20px}select[_ngcontent-%COMP%]{padding:8px 12px;font-size:16px;border:1px solid #ccc;border-radius:5px;background-color:#fff;color:#333;outline:none;transition:border-color .3s ease-in-out;margin-right:30px;width:300px}select[_ngcontent-%COMP%]:focus{border-color:#4caf50}.stock-stepper[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;width:200px;margin-right:30px}.add-stock-btn[_ngcontent-%COMP%]{background-color:purple;color:#fff}"]})};var wt=["rating",""];function Bt(n,e){if(n&1&&(nt(),i(0,"svg",0)(1,"linearGradient",1),g(2,"stop",2)(3,"stop",3),r(),g(4,"polygon",4),r()),n&2){let t=e.$implicit,o=e.$index,m=ut();s(),N("id","F1g"+m.score+o),s(),N("offset",t)("id","F1gst"+m.score+o),s(2),N("fill",m.getFill(m.score+""+o))}}var H=class n{score=0;index=0;stars=[];starList=[];ngOnInit(){this.getStars(this.score)}getStars(e){let t=Math.round(e),o=0,m=5,l=4,Dt=100;this.stars=[];let Y=t/20,Z=Y>m?m:Y,xt=(t%20/20*100).toString()+"%",tt=t%20/20*100;tt!=0&&(o=5-Z);for(let b=0;b<Z;b++)if(this.index=b,b<=l)this.stars.push("100%");else return this.stars;if(this.index<l&&this.stars.push(xt),tt<Dt&&this.stars.length<5){let b=m-this.stars.length;for(let et=0;et<b;et++)this.stars.push("0%")}return this.starList.push(this.stars),this.stars}getFill(e){return"url(#F1g"+e+")"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["","rating",""]],inputs:{score:"score"},standalone:!0,features:[u],attrs:wt,decls:2,vars:0,consts:[["width","21","height","21","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg","data-svg","star"],["y2","0%","x2","100%","y1","0%","x1","0%"],["stop-color","#03dffc"],["stop-color","#FFFFFF","offset","0%","id","F1gst2"],["stroke","lightgrey","points","10 2 12.63 7.27 18.5 8.12 14.25 12.22 15.25 18 10 15.27 4.75 18 5.75 12.22 1.5 8.12 7.37 7.27"]],template:function(t,o){t&1&&d(0,Bt,5,4,":svg:svg",0,P),t&2&&f(o.getStars(o.score))}})};function Tt(n,e){n&1&&(i(0,"div",1)(1,"span"),a(2,"Product ID"),r(),i(3,"span"),a(4,"Product Name"),r(),i(5,"span"),a(6,"Quantity"),r(),i(7,"span"),a(8,"Category"),r(),i(9,"span"),a(10,"Unit Price"),r(),i(11,"span"),a(12,"Order Date"),r(),i(13,"span"),a(14,"Rating"),r()())}function Rt(n,e){if(n&1&&(i(0,"div",2)(1,"span",3),a(2),r(),i(3,"span",4),a(4),r(),i(5,"span"),g(6,"input",5),r(),i(7,"span"),a(8),r(),i(9,"span"),a(10),r(),i(11,"span"),a(12),lt(13,"date"),r(),g(14,"span",6),r()),n&2){let t=e.$implicit,o=e.$index;s(),c("formGroupName",o),s(),F(" ",t.value.productID," "),s(2),x(t.value.productName),s(2),c("value",t.value.quantity),s(2),x(t.value.categoryName),s(2),x(t.value.unitPrice),s(2),x(dt(13,8,t.value.orderDate,"MM/dd/yyyy")),s(2),c("score",t.value.rating)}}var j=class n{parent=S(new I({}));removed=new _;stocks=ft(()=>this.parent().get("stock").controls);onRemove(e,t){this.removed.emit({group:e,index:t})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["stock-products"]],inputs:{parent:[1,"parent"]},outputs:{removed:"removed"},standalone:!0,features:[u],decls:4,vars:2,consts:[[3,"formGroup"],["formArrayName","stock",1,"stock-category-list","header"],["formArrayName","stock",1,"stock-category-list"],[3,"formGroupName"],[1,"product-name"],["type","number","step","10","min","10","max","40",1,"category-stock-item",3,"value"],["rating","",3,"score"]],template:function(t,o){t&1&&(i(0,"div",0),at(1,Tt,15,0,"div",1),d(2,Rt,15,11,"div",2,pt),r()),t&2&&(c("formGroup",o.parent()),s(),mt(o.stocks().length>0?1:-1),s(),f(o.stocks()))},dependencies:[y,v,h,D,bt,gt,H],styles:[".product-stock[_ngcontent-%COMP%]{display:flex}.stock-category-list.header[_ngcontent-%COMP%]{font-weight:700}.stock-category-list[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:20px;padding:10px}.stock-category-list[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{overflow-x:hidden}.stock-category-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:15%;overflow-x:hidden}.stock-category-list[_ngcontent-%COMP%]:nth-child(2n){background-color:#f3f6f7}.category-stock-item[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;width:50px;margin-right:30px}"]})};var U=class n{_http=k(Ct);url=vt.apiUrl;constructor(){}getCustomers(){var e=this._http.get(`${this.url}/customers/`).pipe(W(t=>{}),K(this.handleError));return e}getProductsByCustomer(e){console.log(e,"ID");var t=this._http.get(`${this.url}/Category/${e}`).pipe(W(o=>{}),K(this.handleError));return t}handleError(e){return console.error(e),ot(()=>e||"Server error")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=rt({token:n,factory:n.\u0275fac,providedIn:"root"})};var It=class n{constructor(e){this.fb=e;this.form=this.fb.group({store:this.fb.group({customer:"",code:""}),selector:this.fb.group({customerID:0,categoryName:"",productName:"",orderDate:"",productID:0,unitPrice:0,quantity:90,rating:0}),stock:this.fb.array([])})}el=k(it);className="stock-inventory";onClick(){console.log("Clicked")}_customerService=k(U);customerList;topCustomers=[];customerProductsList;customerProducts=[];products=[{categoryId:2,unitPrice:20,productName:"test"},{categoryId:3,unitPrice:120,productName:"test two"},{categoryId:4,unitPrice:230,productName:"test three"}];categoriesList;_categoryService=k(Ft);categories=[];ngOnInit(){this.categoriesList=this._categoryService.getCategories().subscribe(e=>{this.categories=e}),this.getCustomers()}ngOnDestroy(){this.categoriesList&&this.categoriesList.unsubscribe()}form;createStock(e){return this.fb.group({customerID:this.fb.control(e.customerID),categoryName:this.fb.control(e.categoryName),productName:this.fb.control(e.productName),orderDate:this.fb.control(e.orderDate),productID:this.fb.control(e.productID),unitPrice:this.fb.control(e.unitPrice),quantity:this.fb.control(e.quantity),rating:this.getRating()})}addStock(e){console.log(e,"Value"),this.form.get("stock").push(this.createStock(e))}removeStock({group:e,index:t}){this.form.get("stock").removeAt(t),console.log(e,t)}getRating(){return Math.random()*100+1}getCustomers(){this.customerList=this._customerService.getCustomers().pipe(Q(e=>e.data.map((t,o)=>J(z({},t),{pkID:o+1})))).subscribe(e=>{this.topCustomers=e})}getProductsByCustomer(e){this.customerProductsList=this._customerService.getProductsByCustomer(e).pipe(Q(t=>t.map((o,m)=>J(z({},o),{pkID:m+1})))).subscribe(t=>{this.customerProducts=t})}onSubmit(){console.log("Submit",this.form.value),console.log("Host Element",this.el)}static \u0275fac=function(t){return new(t||n)(st(Pt))};static \u0275cmp=p({type:n,selectors:[["app-stock-inventory"]],hostVars:2,hostBindings:function(t,o){t&1&&C("click",function(){return o.onClick()}),t&2&&ct(o.className)},standalone:!0,features:[u],decls:8,vars:7,consts:[[1,"stock-form-container"],[3,"ngSubmit","formGroup"],[3,"selectedCustomer","parent","topCustomers"],[3,"added","parent","customerProducts"],[3,"removed","parent"],[1,"submit-button-stock"],["type","submit",1,"btn","btn-info",3,"disabled"]],template:function(t,o){t&1&&(i(0,"section",0)(1,"form",1),C("ngSubmit",function(){return o.onSubmit()}),i(2,"stock-branch",2),C("selectedCustomer",function(l){return o.getProductsByCustomer(l)}),r(),i(3,"stock-selector",3),C("added",function(l){return o.addStock(l)}),r(),i(4,"stock-products",4),C("removed",function(l){return o.removeStock(l)}),r(),i(5,"div",5)(6,"button",6),a(7,"Order Stock"),r()()()()),t&2&&(s(),c("formGroup",o.form),s(),c("parent",o.form)("topCustomers",o.topCustomers),s(),c("parent",o.form)("customerProducts",o.customerProducts),s(),c("parent",o.form),s(2),c("disabled",o.form.invalid))},dependencies:[y,yt,v,h,V,q,j],styles:[".stock-form-container[_ngcontent-%COMP%]{margin:0 auto;width:70%;background-color:#fff;padding:20px}"]})};export{It as StockInventoryComponent};
