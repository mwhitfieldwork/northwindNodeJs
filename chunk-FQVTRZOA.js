import{a as X,b as K}from"./chunk-ZO4JBRXK.js";import{b as Q,d as h,f as W,g as Z,l as ee,n as te,q as oe,w as ne,y as ie}from"./chunk-Y2YOYVZC.js";import{$b as $,Aa as _,Ac as U,Bb as y,C as k,Db as s,Eb as R,Fb as B,Ja as z,Ma as a,Ob as i,Pb as d,Qb as w,V as j,Wb as f,Y as G,Zb as Y,ca as u,db as O,ga as c,ib as g,kb as q,lc as J,nb as v,oa as H,p as L,pa as x,qa as E,qb as N,rb as P,sb as n,tb as o,ub as p,xa as b,yb as S}from"./chunk-SPCE6MV4.js";var M=class l{firstName=_();lastName=_();photo=_();title=_();selected=_.required();name=J(()=>`${this.firstName()} ${this.lastName()}`);static \u0275fac=function(e){return new(e||l)};static \u0275cmp=c({type:l,selectors:[["app-employee"]],inputs:{firstName:[1,"firstName"],lastName:[1,"lastName"],photo:[1,"photo"],title:[1,"title"],selected:[1,"selected"]},standalone:!0,features:[f],decls:4,vars:3,consts:[[1,"employee-item"],[1,"employee-item__details"],[1,"name"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"p",2),i(3),o()()()),e&2&&(q("active",r.selected()),a(3),d(r.name()))},styles:[".employee-item[_ngcontent-%COMP%]{display:flex;width:250px;height:45px;padding-left:10px;font-family:Roboto,sans-serif;font-size:small;align-items:center}.employee-item.active[_ngcontent-%COMP%]{background-color:green;color:#fff}.employee-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:100%;padding:0;margin:0;font-weight:700}"]})};var re=(l,t)=>t.territoryId;function ae(l,t){if(l&1&&(n(0,"p"),i(1),o()),l&2){let e=t.$implicit;a(),d(e.territoryId)}}function me(l,t){if(l&1&&(n(0,"div",0)(1,"h3"),i(2,"Employee Territories:"),o(),N(3,ae,2,1,"p",null,re),o()),l&2){let e=s();a(3),P(e.territoriesList)}}var D=class l{isSelected=!1;territoriesList=[];employeeId;territories=[{employeeId:1,territoryId:11234},{employeeId:1,territoryId:2334},{employeeId:3,territoryId:34567}];ngOnChanges(){this.employeeId&&this.onSelectTerritories(this.employeeId)}onSelectTerritories(t){this.territoriesList=this.territories,t&&(this.isSelected=!0,this.territoriesList=this.territories.filter(e=>e.employeeId===t))}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=c({type:l,selectors:[["app-territories"]],inputs:{employeeId:"employeeId"},standalone:!0,features:[H,f],decls:1,vars:1,consts:[[1,"employee-territories"]],template:function(e,r){e&1&&O(0,me,5,0,"div",0),e&2&&v(r.territoriesList.length>=1?0:-1)},styles:[".employee-territories[_ngcontent-%COMP%]{border:3px dashed #ccc;padding:10px;background-color:#f3f6f8;margin-top:10px;display:flex}.employee-territories[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;font-size:large;margin-right:20px}.employee-territories[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:smaller;padding:0 10px;margin:0}"]})};var pe={headers:new X({"Content-Type":"application/json"})},F=class l{_http=u(K);url="https://localhost:7216";errorMessage;constructor(){}get(){return this._http.get(`${this.url}/Employee/`).pipe(j(t=>{console.log(this.url)}),k(this.handleError))}addEmployee(t){let e=`${this.url}/Employee/AddEmployee`,r=JSON.stringify(t);return this._http.post(e,r,pe).pipe(k(m=>{throw this.errorMessage=m.message,console.error("There was an error!!",m),m}))}dropEmployee(t){let e=`${this.url}/Employee/${t}`;var r=this._http.delete(e).subscribe({next:m=>{console.log("Delete successful")},error:m=>{this.errorMessage=m.message,console.error("There was an error!!",m)}})}handleError(t){return console.error(t),L(()=>t||"Server error")}static \u0275fac=function(e){return new(e||l)};static \u0275prov=G({token:l,factory:l.\u0275fac,providedIn:"root"})};var T=class l{close=new b;submitFrom=new b;employeeFrom;fb=u(ne);ngOnInit(){this.employeeFrom=this.fb.group({firstName:["",h.required],lastName:["",h.required],title:["",h.required],homePhone:["",h.required],photo:["",h.required],notes:[""],city:[""],country:[""],postalCode:[""],region:[""],extension:[""],titleOfCourtesy:[""],birthDate:[""],hireDate:[""]})}closeDialog(){this.close.emit(!1)}onSubmit(){this.submitFrom.emit(this.employeeFrom),console.log("Submit",this.employeeFrom.value)}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=c({type:l,selectors:[["app-add-new-employee"]],outputs:{close:"close",submitFrom:"submitFrom"},standalone:!0,features:[f],decls:54,vars:1,consts:[[1,"backdrop"],["open",""],[1,"close-dialog",3,"click"],[3,"formGroup"],[1,"add-employee-form"],["cass","add-employee-form__name"],["for","firstName"],["type","text","placeholder","First Name","name","firstName","formControlName","firstName"],["for","lastName"],["type","text","placeholder","Last Name","name","lastName","formControlName","lastName"],["for","title"],["type","text","placeholder","Title","name","title","formControlName","title"],["for","photo"],["type","text","placeholder","Photo","name","photo","formControlName","photo"],["for","notes"],["type","text","placeholder","Notes","name","notes","formControlName","notes"],[1,"add-employee-form__location"],["for","address"],["type","hidden","placeholder","City","name","city","formControlName","city"],["type","hidden","placeholder","Country","name","country","formControlName","country"],["for","postalCode"],["type","hidden","placeholder","Postal Code","name","postalCode","formControlName","postalCode"],["for","region"],["type","hidden","placeholder","Region","name","region","formControlName","region"],["for","homePhone"],["type","hidden","placeholder","Home Phone","name","homePhone","formControlName","homePhone"],[1,"add-employee-form__contact"],["for","extension"],["type","hidden","placeholder","Extension","name","extension","formControlName","extension"],["for","titleOfCourtesy"],["type","hidden","placeholder","Title of courtesy","name","titleOfCourtesy","formControlName","titleOfCourtesy"],["for","birthDate"],["type","hidden","placeholder","Birth date","name","birthDate","formControlName","birthDate"],["for","hireDate"],["type","hidden","placeholder","Hire date","name","hireDate","formControlName","hireDate"],["type","button",3,"click"]],template:function(e,r){e&1&&(p(0,"div",0),n(1,"dialog",1)(2,"div",2),y("click",function(){return r.closeDialog()}),i(3,"X"),o(),n(4,"form",3)(5,"div",4)(6,"div",5)(7,"label",6),i(8,"First Name "),p(9,"input",7),o(),n(10,"label",8),i(11,"Last Name "),p(12,"input",9),o(),n(13,"label",10),i(14,"Title "),p(15,"input",11),o()(),n(16,"div")(17,"label",12),i(18,"Photo "),p(19,"input",13),o(),n(20,"label",14),i(21,"Notes "),p(22,"input",15),o()()(),n(23,"div",16)(24,"label",17),i(25,"Address "),p(26,"input",18),o(),n(27,"label",17),i(28,"Address "),p(29,"input",19),o(),n(30,"label",20),i(31,"Postal Code "),p(32,"input",21),o(),n(33,"label",22),i(34,"Region "),p(35,"input",23),o(),n(36,"label",24),i(37,"Home Phone "),p(38,"input",25),o()(),n(39,"div",26)(40,"label",27),i(41,"Extension "),p(42,"input",28),o(),n(43,"label",29),i(44,"titleOfCourtesy "),p(45,"input",30),o(),n(46,"label",31),i(47,"Birth Date "),p(48,"input",32),o(),n(49,"label",33),i(50,"Hire Date "),p(51,"input",34),o()(),n(52,"button",35),y("click",function(){return r.onSubmit()}),i(53,"Submit"),o()()()),e&2&&(a(4),g("formGroup",r.employeeFrom))},dependencies:[ie,ee,Q,W,Z,te,oe],styles:[".backdrop[_ngcontent-%COMP%]{background-color:#0006;position:fixed;top:0;left:0;width:100%;height:100vh}dialog[_ngcontent-%COMP%]{width:90%;max-width:40rem;background-color:#eee;border-radius:6px;border:none;box-shadow:0 1px 6px #0006;overflow:hidden;padding:1rem;top:5rem}dialog[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;padding:5px;border:1px solid #ccc;width:200px;margin-right:30px}dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:0 auto;width:90%}dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-employee-form__location[_ngcontent-%COMP%], dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-employee-form__contact[_ngcontent-%COMP%]{visibility:hidden;margin-bottom:20px}dialog[_ngcontent-%COMP%]   .close-dialog[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;cursor:pointer}"]})};var se=[[["h2"]]],de=["h2"],ce=(l,t)=>t.employeeId;function ye(l,t){if(l&1){let e=S();n(0,"li")(1,"app-employee",5),y("click",function(){let m=x(e).$implicit,C=s();return E(C.onSelect(m))}),o()()}if(l&2){let e=t.$implicit,r=s();a(),g("firstName",e.firstName)("lastName",e.lastName)("title",e.title)("selected",e.employeeId===r.selectedEmployee.employeeId)}}function fe(l,t){if(l&1){let e=S();n(0,"article",4)(1,"div",6)(2,"div",7)(3,"p"),i(4),o(),n(5,"p"),i(6),o(),n(7,"p",8),i(8),o()(),p(9,"img",9),o(),n(10,"div",10)(11,"p"),i(12),o(),n(13,"p"),i(14),o(),n(15,"p"),i(16),o()(),n(17,"div"),i(18),Y(19,"date"),o(),n(20,"div",11)(21,"p"),i(22),o()(),p(23,"app-territories",12),n(24,"div",13)(25,"a",14),y("click",function(){x(e);let m=s();return E(m.onDropEmployee(m.selectedEmployee.employeeId))}),i(26,"Drop Employee"),o()()()}if(l&2){let e=s();a(4),d(e.selectedEmployee.firstName),a(2),d(e.selectedEmployee.lastName),a(2),d(e.selectedEmployee.title),a(),g("src",e.profile_pic,z),a(3),w("",e.selectedEmployee.city,", "),a(2),w(" ",e.selectedEmployee.country,", "),a(2),w(" ",e.selectedEmployee.postalCode,""),a(2),w("Hire date: ",$(19,10,e.selectedEmployee.hireDate,"fullDate"),""),a(4),d(e.selectedEmployee.notes),a(),g("employeeId",e.selectedEmployee.employeeId)}}function ue(l,t){if(l&1){let e=S();n(0,"div")(1,"app-add-new-employee",15),y("close",function(m){x(e);let C=s();return E(C.closeDialog(m))})("submitFrom",function(m){x(e);let C=s();return E(C.onAddEmployee(m))}),o()()}}var V=new Date;V.setFullYear(V.getFullYear()-18);var le=class l{selectedEmployee={};isLoading=!1;isSelected=!1;employees=[];employeesList;_employeeService=u(F);profile_pic;isAddSelected=!1;employeeSelected=new b;ngOnInit(){this.isLoading=!0,this.employeesList=this._employeeService.get().subscribe(t=>{this.isLoading=!1,this.employees=t.filter(e=>e.isDeleted!==!0)})}onSelect(t){this.selectedEmployee=t,this.isSelected=!0,this.profile_pic=`/${t.firstName?.toLocaleLowerCase()}.png`,this.employeeSelected.emit(t.employeeId)}onAddDialog(){this.isAddSelected=!0}onAddEmployee(t){let e={employeeId:0,firstName:t.value.firstName,lastName:t.value.lastName,title:t.value.title,titleOfCourtesy:t.value.titleOfCourtesy,birthDate:V,hireDate:new Date,address:"",city:t.value.city,region:t.value.region,postalCode:t.value.postalCode,country:t.value.country,homePhone:t.value.homePhone,extension:t.value.extension,notes:t.value.notes,reportsTo:"",photo:"",isDeleted:!1};this._employeeService.addEmployee(e).subscribe({next:r=>console.log("Employee added successfully:",r),error:r=>console.error("Error adding employee:",r)})}onDropEmployee(t){this._employeeService.dropEmployee(t)}closeDialog(t){this.isAddSelected=t}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=c({type:l,selectors:[["app-employees"]],outputs:{employeeSelected:"employeeSelected"},standalone:!0,features:[f],ngContentSelectors:de,decls:11,vars:2,consts:[["id","employee-list-title"],[1,"add-employee"],[1,"btn","btn-primary",3,"click"],["id","employee-detail-wrapper"],[1,"employee-profile"],[3,"click","firstName","lastName","title","selected"],[1,"employee-profile__greeting"],[1,"employee-profile__name"],[1,"employee-profile__profession"],[1,"employee-profile__image",3,"src"],[1,"employee-profile__location"],[1,"employee-profile__notes"],[3,"employeeId"],[1,"employee-profile__drop"],["href","#",1,"drop-button",3,"click"],[3,"close","submitFrom"]],template:function(e,r){e&1&&(R(se),n(0,"section",0)(1,"div",1)(2,"button",2),y("click",function(){return r.onAddDialog()}),i(3,"Add New Employee"),o()(),B(4),o(),n(5,"section",3)(6,"ul"),N(7,ye,2,4,"li",null,ce),o(),O(9,fe,27,13,"article",4)(10,ue,2,0,"div"),o()),e&2&&(a(7),P(r.employees),a(2),v(r.isSelected?9:-1),a(),v(r.isAddSelected?10:-1))},dependencies:[M,D,T,U],styles:["#employee-list-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px}#employee-detail-wrapper[_ngcontent-%COMP%]{display:flex;height:350px}#employee-detail-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;min-width:250px;max-height:300px;list-style:none;margin:0;padding:0}#employee-detail-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}#employee-detail-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ccc;color:#fff}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile[_ngcontent-%COMP%]{margin-left:20px}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile__greeting[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile__name[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:flex-end;height:100px;margin-bottom:35px;font-size:larger}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile__image[_ngcontent-%COMP%]{width:100px;height:100px;margin-right:10px}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile__location[_ngcontent-%COMP%]{display:flex;font-size:small;font-weight:700}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile__notes[_ngcontent-%COMP%]{font-size:small}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile__drop[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}#employee-detail-wrapper[_ngcontent-%COMP%]   .employee-profile[_ngcontent-%COMP%]   .drop-button[_ngcontent-%COMP%]{color:red;text-decoration:none}"]})};export{le as EmployeesComponent};
