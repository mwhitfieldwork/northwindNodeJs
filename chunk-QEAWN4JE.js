import{a as p}from"./chunk-OBPBYJ6A.js";import{a as u,b as c}from"./chunk-6BTYBERF.js";import{C as s,V as i,Y as a,ca as l,k as o,p as n}from"./chunk-LQNTNMU7.js";var g=class r{_http=l(c);userSubject=new o(null);user$=this.userSubject.asObservable();url=p.apiUrl;errorMessage;token;get currentUser(){return console.log(this.userSubject.getValue(),"User Gotten"),this.userSubject.getValue()}setUser(e,t){localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",JSON.stringify(t))}getUser(e){let t=localStorage.getItem("token"),h=t?JSON.parse(t):null,m=new u({Authorization:`Bearer ${h}`}),b=`${this.url}/login/me`;return this._http.get(b,{headers:m}).pipe(i(f=>{console.log("\u2705 This is the USER!!",f)}),s(this.handleError))}handleError(e){return console.error(e),n(()=>e||"Server error")}static \u0275fac=function(t){return new(t||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{g as a};
