import{a as V}from"./chunk-QEAWN4JE.js";import{a as K,b as W}from"./chunk-AM5BIX24.js";import{b as z}from"./chunk-QCVCOU5D.js";import{f as D}from"./chunk-WJG4GRX2.js";import{a as k}from"./chunk-OBPBYJ6A.js";import{e as q}from"./chunk-YWHHTW7O.js";import"./chunk-3ZHM2HVE.js";import"./chunk-EJJBCPAK.js";import{a as F,b as P}from"./chunk-6BTYBERF.js";import{b as T,f as H,g as Q,i as R,k as G,l as J,x as $}from"./chunk-Y57RGH3B.js";import{Bb as h,Eb as C,Fb as p,Gb as B,Ib as L,Jb as U,Ma as v,Nb as N,Ob as r,Pb as O,Vb as l,Y as b,ca as c,ga as m,ib as j,k as E,pa as d,qa as g,sb as o,tb as a,ub as I,xa as A,yb as S}from"./chunk-LQNTNMU7.js";var tt=[[["h3"]],[["button"]]],et=["h3","button"],_=class n{signInErrorMessage;submitted=new A;onSubmit(e){this.submitted.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-auth-form"]],inputs:{signInErrorMessage:"signInErrorMessage"},outputs:{submitted:"submitted"},standalone:!0,features:[l],ngContentSelectors:et,decls:13,vars:1,consts:[["form","ngForm"],[3,"ngSubmit"],["type","email","name","UserName","ngModel",""],["type","password","name","Password","ngModel",""],[1,"text-danger","p-3"]],template:function(t,i){if(t&1){let s=S();C(tt),o(0,"div")(1,"form",1,0),h("ngSubmit",function(){d(s);let f=N(2);return g(i.onSubmit(f.value))}),p(3),o(4,"label"),r(5,"Email address "),I(6,"input",2),a(),o(7,"label"),r(8," Password "),I(9,"input",3),a(),p(10,1),a(),o(11,"p",4),r(12),a()()}t&2&&(v(12),O(i.signInErrorMessage))},dependencies:[$,J,T,H,Q,G,R,z,q],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:25px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;padding:5px;border:1px solid #ccc;width:200px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:25px}[_nghost-%COMP%]:first-child{border-right:1px solid #ccc}"]})};var Y={headers:new F({"Content-Type":"application/json",Authorization:"my-auth-token"})},M=class n{url=k.apiUrl;errorMessage;_http=c(P);constructor(){}createUser(e){let t=`${this.url}/register`,i=JSON.stringify(e);var s=this._http.post(t,i,Y);return console.log(t),s}AuthenticateUser(e){let t=`${this.url}/login`,i=JSON.stringify(e);var s=this._http.post(t,i,Y);return console.log(t),s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})};var nt=["icon"],ot=["appButton",""],it=["*",[["icon"]]],rt=["*","icon"],w=class n{icon;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["","appButton",""],["a","appButton",""]],contentQueries:function(t,i,s){if(t&1&&B(s,nt,5),t&2){let u;L(u=U())&&(i.icon=u.first)}},standalone:!0,features:[l],attrs:ot,ngContentSelectors:rt,decls:2,vars:0,template:function(t,i){t&1&&(C(it),p(0),p(1,1))},styles:["[_nghost-%COMP%]{background-color:#619ebe;color:#fff}"]})};var x=class n{sessionSubject=new E(null);token;getToken(){return this.token}setAuthState(e){this.token=e}static \u0275fac=function(t){return new(t||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})};var Z=class n{_loginService=c(M);authUser=c(x);_userSessionService=c(V);router=c(D);signInErrorMessage="";constructor(){console.log("UserSessionService instance created")}createUser(e){this._loginService.createUser(e).subscribe(t=>{console.log(t)})}verifyUser(e){this._loginService.AuthenticateUser(e).subscribe(t=>{t?.message==="Login successful"?(this._userSessionService.setUser(t.data.user.PKID,t.data.token),this.router.navigate(["/dashboard"]).then(()=>{window.location.reload()})):this.signInErrorMessage=t.value})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-login"]],standalone:!0,features:[l],decls:17,vars:1,consts:[["appButton",""],[1,"p-3","mb-4"],[3,"submitted"],["type","submit","appButton","",1,"btn","btn-secondary"],["ngProjectAs","icon",5,["icon"]],[3,"submitted","signInErrorMessage"],["type","submit","appButton","",1,"btn","btn-warning"]],template:function(t,i){if(t&1){let s=S();o(0,"mat-card",1)(1,"article")(2,"app-auth-form",2),h("submitted",function(f){return d(s),g(i.createUser(f))}),o(3,"h3"),r(4,"Sign Up"),a(),o(5,"button",3),r(6," Sign In "),o(7,"span",4),r(8," ->"),a()()(),o(9,"app-auth-form",5),h("submitted",function(f){return d(s),g(i.verifyUser(f))}),o(10,"h3"),r(11,"Log In"),a(),o(12,"button",6,0),r(14,"Log In "),o(15,"span",4),r(16," >"),a()()()()()}t&2&&(v(9),j("signInErrorMessage",i.signInErrorMessage))},dependencies:[_,W,K,w],styles:[`body{background-color:#343b4a!important}mat-card{width:40%;margin:150px auto}mat-card article{display:flex;flex-direction:row;justify-content:center}mat-card button{width:100px}mat-card p{display:flex;align-self:center}
`],encapsulation:2})};export{Z as LoginComponent};
